"use strict";(self["webpackChunkdrfoody"]=self["webpackChunkdrfoody"]||[]).push([[126],{4800:function(e,t,s){s.r(t),s.d(t,{default:function(){return K}});var l=s(6252),o=s(3577),c=s(9963),a=s(7128),i=s(1931),n=s(8454),d=s(2919);const r=e=>((0,l.dD)("data-v-9b7ac32c"),e=e(),(0,l.Cn)(),e),h={class:"mainContents"},u=r((()=>(0,l._)("h3",null,"식단관리",-1))),m=r((()=>(0,l._)("hr",{id:"first_line"},null,-1))),p={class:"container"},g={class:"arrow"},v={class:"day"},y={class:"arrow"},f={class:"container"},k=["onClick"],w={class:"writeList"},M={key:0,class:"record"},b=r((()=>(0,l._)("div",{class:"noticeRecord"},"식사 기록이 없습니다",-1))),I=r((()=>(0,l._)("div",{class:"r-b"},"기록하기",-1))),_=r((()=>(0,l._)("img",{src:n,id:"penBTN",alt:"기록"},null,-1))),C=[_],R={key:1,class:"writeRecord"},S={class:"titleNbtn"},D=r((()=>(0,l._)("div",{class:"write_word"},"식사기록",-1))),q={class:"Icons"},T={class:"saveNchange_BTN"},A={class:"writeListItems"},E={class:"writeListEle"},N=["onUpdate:modelValue","placeholder","disabled"],x=["onClick"],W=["onClick"],B=["onClick"],L={class:"compNcan"},$={class:"main"},V=r((()=>(0,l._)("div",{class:"word"},"식단 추천",-1))),Z={class:"writeListItems"};function P(e,t,s,r,_,P){const U=(0,l.up)("foody-header"),z=(0,l.up)("RecordPopUp"),F=(0,l.up)("foody-nav");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(U),(0,l._)("div",h,[u,m,(0,l._)("div",p,[(0,l._)("div",g,[(0,l._)("img",{src:a,alt:"어제 날짜로",onClick:t[0]||(t[0]=e=>P.moveDay(-1))})]),(0,l._)("div",v,(0,o.zw)(_.currentDate),1),(0,l._)("div",y,[(0,l._)("img",{src:i,alt:"내일 날짜",onClick:t[1]||(t[1]=e=>P.moveDay(1))})])]),(0,l._)("div",f,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(_.meals,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,onClick:t=>P.selectMealTime(e.id),class:(0,o.C_)({mealTime:!0,selected:_.selectedMeal===e.id})},(0,o.zw)(e.name),11,k)))),128))]),(0,l._)("div",w,[_.showWriteRecord?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",M,[b,I,(0,l._)("div",{class:"write_BTN",onClick:t[2]||(t[2]=e=>P.writeRecord())},C)])),_.showWriteRecord?((0,l.wg)(),(0,l.iD)("div",R,[(0,l._)("div",S,[D,(0,l._)("div",q,[(0,l._)("div",T,[1===_.showCount?((0,l.wg)(),(0,l.iD)("img",{key:0,src:d,onClick:t[3]||(t[3]=e=>P.saveRecord()),id:"saveBTN",alt:"저장"})):(0,l.kq)("",!0),2===_.showCount?((0,l.wg)(),(0,l.iD)("img",{key:1,src:n,onClick:t[4]||(t[4]=e=>P.ChangeRecord()),id:"changeBTN",alt:"수정"})):(0,l.kq)("",!0)]),1===_.showCount?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"saveText",onClick:t[5]||(t[5]=e=>P.saveRecord())},"저장")):(0,l.kq)("",!0),2===_.showCount?((0,l.wg)(),(0,l.iD)("div",{key:1,class:"changeText",onClick:t[6]||(t[6]=e=>P.ChangeRecord())},"수정")):(0,l.kq)("",!0)])]),(0,l._)("div",A,[(0,l._)("div",E,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(P.selectedMealItems,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:"inputWrapper"},[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":e=>P.selectedMealItems[t].value=e,placeholder:P.getPlaceholderText(t),disabled:P.selectedMealItems[t].disabled},null,8,N),[[c.nr,P.selectedMealItems[t].value]]),1===_.showCount?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"puls",onClick:e=>P.decisionList(t,!0)},"+",8,x)):(0,l.kq)("",!0),1===_.showCount?((0,l.wg)(),(0,l.iD)("div",{key:1,class:"eliminate",onClick:e=>P.removeLastItem(t,!0)},"x",8,W)):(0,l.kq)("",!0),1===_.showCount?((0,l.wg)(),(0,l.iD)("div",{key:2,class:"minus",onClick:e=>P.decisionList(t,!1)},"-",8,B)):(0,l.kq)("",!0)])))),128))]),(0,l._)("div",L,[1===_.showCount?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"comp",onClick:t[7]||(t[7]=t=>P.addInput(e.index))},"추가 기록")):(0,l.kq)("",!0),1===_.showCount?((0,l.wg)(),(0,l.iD)("div",{key:1,class:"can",onClick:t[8]||(t[8]=e=>P.recordCancel())},"기록 취소")):(0,l.kq)("",!0),2===_.showCount?((0,l.wg)(),(0,l.iD)("div",{key:2,class:"del",onClick:t[9]||(t[9]=e=>P.DelRecord())},"기록 삭제")):(0,l.kq)("",!0)])])])):(0,l.kq)("",!0),1==this.openModal?((0,l.wg)(),(0,l.j4)(z,{key:2,onClosePopup:P.closeModalView,onDeReco:_.Reco},null,8,["onClosePopup","onDeReco"])):(0,l.kq)("",!0),(0,l._)("div",$,[V,(0,l._)("div",Z,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(P.selectedMealItemsRecord,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,id:"item",class:"item1"},(0,o.zw)(e),1)))),128))])])])]),(0,l.Wm)(F)],64)}var U=s(8062),z=s(3937),F=s(5506),j=s(5121),O={name:"DietManage2",components:{FoodyHeader:z.Z,FoodyNav:F.Z,RecordPopUp:U.Z},data(){return{openModal:!1,Reco:!1,showWriteRecord:!1,showCount:0,isSaveVisible:!1,originalMealItems:{},currentDate:"",meals:[{id:"mor",name:"아침"},{id:"lun",name:"점심"},{id:"din",name:"저녁"}],selectedMeal:"mor",mealItems:{mor:[],lun:[],din:[]},mealItemsRecord:{mor:[],lun:[],din:[]},lookTimes:"",user_id:this.$store.state.userId}},mounted(){this.setCurrentDate()},computed:{selectedMealItems(){return this.mealItems[this.selectedMeal]},selectedMealItemsRecord(){return this.mealItemsRecord[this.selectedMeal]}},methods:{setCurrentDate(){const e=new Date,t=e.getMonth()+1,s=e.getDate(),l=e.getFullYear();this.currentDate=`${t}월 ${s}일`,this.lookTimes=`${l}-${String(t).padStart(2,"0")}-${String(s).padStart(2,"0")}`},moveDay(e){const t=new Date(this.lookTimes),s=new Date(t.setDate(t.getDate()+e)),l=s.getMonth()+1,o=s.getDate(),c=s.getFullYear();this.currentDate=`${l}월 ${o}일`,this.lookTimes=`${c}-${String(l).padStart(2,"0")}-${String(o).padStart(2,"0")}`,this.callRecordList()},writeRecord(){this.setRecordListMealItems(),this.showWriteRecord=!0,this.showCount=1},selectMealTime(e){this.selectedMeal=e,this.selectedItem=this.mealItems[e],0===this.showCount?(this.showWriteRecord=!1,this.isSaveVisible=!0):(this.showWriteRecord=!0,this.isSaveVisible=!1)},hasSavedRecord(e){return this.mealItems[e].every((e=>e.check))},selectItem(e){this.selectedItem=e},addInput(e){const t=e+1===this.selectedMealItems.length?e+1:this.selectedMealItems.length;this.selectedMealItems.splice(t,0,{value:"",active:!0,check:!1})},recordCancel(){this.setRecordListMealItems(),this.showWriteRecord=!1,this.isSaveVisible=!0,this.showCount=0},getPlaceholderText(e){return"Item "+(1+e)},decisionList(e,t){const s=document.querySelectorAll(".puls"),l=document.querySelectorAll(".eliminate"),o=document.querySelectorAll(".minus");e>=0&&e<this.selectedMealItems.length&&(t?(this.selectedMealItems[e]={value:this.selectedMealItems[e].value,disabled:!0},s[e].style.display="none",l[e].style.display="none",o[e].style.display="block"):(this.selectedMealItems[e]={value:this.selectedMealItems[e].value,disabled:!1},s[e].style.display="block",l[e].style.display="block",o[e].style.display="none"))},setSaveRecord(){const e=document.querySelectorAll(".puls"),t=document.querySelectorAll(".eliminate"),s=document.querySelectorAll(".minus"),l=document.querySelectorAll(".comp"),o=document.querySelectorAll(".can"),c=document.querySelectorAll(".del");this.selectedMealItems.length>0&&this.selectedMealItems.forEach(((l,o)=>{const c=e[o],a=t[o],i=s[o];c.style.display="none",a.style.display="none",i.style.display="none"})),l.forEach((e=>e.style.display="none")),o.forEach((e=>e.style.display="none")),c.forEach((e=>e.style.display="block"));const a=document.querySelectorAll("#changeBTN");a.forEach((e=>e.style.display="block"));const i=document.querySelectorAll("#saveBTN");i.forEach((e=>e.style.display="none"));const n=document.querySelectorAll(".changeText");n.forEach((e=>e.style.display="block"));const d=document.querySelectorAll(".saveText");d.forEach((e=>e.style.display="none"));const r=document.querySelectorAll(".record");r.forEach((e=>e.style.display="none")),this.showWriteRecord=!0,this.isSaveVisible=!1,this.showCount=2},setChangeRecord(){const e=document.querySelectorAll(".puls"),t=document.querySelectorAll(".eliminate"),s=document.querySelectorAll(".minus"),l=document.querySelectorAll(".comp"),o=document.querySelectorAll(".can"),c=document.querySelectorAll(".del");this.selectedMealItems.forEach(((l,o)=>{const c=s[o],a=t[o],i=e[o];c.style.display="none",a.style.display="block",i.style.display="block"})),l.forEach((e=>e.style.display="block")),o.forEach((e=>e.style.display="block")),c.forEach((e=>e.style.display="none"));const a=document.querySelectorAll("#changeBTN");a.forEach((e=>e.style.display="none"));const i=document.querySelectorAll("#saveBTN");i.forEach((e=>e.style.display="block"));const n=document.querySelectorAll(".changeText");n.forEach((e=>e.style.display="none"));const d=document.querySelectorAll(".saveText");d.forEach((e=>e.style.display="block"));const r=document.querySelectorAll(".record");r.forEach((e=>e.style.display="block")),this.showWriteRecord=this.hasSavedRecord(this.selectedMeal),this.isSaveVisible=this.hasSavedRecord(this.selectedMeal),this.showCount=1},saveRecord(){const e=this.$store.state.userId,t=this.lookTimes,s="mor"===this.selectedMeal?"아침":"lun"===this.selectedMeal?"점심":"저녁",l=this.mealItems.mor.map((e=>e.value)),o=this.mealItems.lun.map((e=>e.value)),c=this.mealItems.din.map((e=>e.value)),a="mor"===this.selectedMeal?l:"lun"===this.selectedMeal?o:c,i=a.join(", ");(0,j.Z)({method:"post",url:"https://port-0-food-bag-jvpb2alnlhtxnz.sel5.cloudtype.app/calenderMeal/writeMealRecords?",params:{userIdx:e,date:t,occasion:s,foodRecord:i}}).then((e=>{const t=e.data;switch(t){case"200":console.log(e.data),this.showWriteRecord=!0,this.isSaveVisible=!1;break;case"-2":console.log(e.data);break;case"-3":console.log(e.data);break;default:console.log(e.data);break}})).catch((e=>{console.log("에러!!!"),console.log(e)})),this.setSaveRecord(),this.mealItems[this.selectedMeal].forEach((e=>{e.disabled=!0,e.check=!0})),this.showCount=2},ChangeRecord(){this.mealItems[this.selectedMeal].forEach((e=>{e.disabled=!1,e.check=!1})),this.showCount=1},DelRecord(){this.openModal=!0},closeModalView(e){this.openModal=e},removeLastItem(e){e>=0&&e<this.selectedMealItems.length&&this.selectedMealItems.splice(e,1)},callRecordList(){const e=this.user_id,t=String(this.lookTimes),s="mor"===this.selectedMeal?"아침":"lun"===this.selectedMeal?"점심":"저녁";(0,j.Z)({method:"get",url:"https://port-0-food-bag-jvpb2alnlhtxnz.sel5.cloudtype.app/calenderRecommend/searchRmdMeal?",params:{userIdx:e,date:t,occasion:s}}).then((e=>{const t=e.data;switch(t.rst_cd){case"-1":console.log(t);break;case"200":console.log(t),this.mealItemsRecord[this.selectedMeal]=t.foodList.map((e=>e.name));break;default:console.log(t);break}})).catch((e=>{console.log("에러!!!"),console.log(e)}))},setRecordListMealItems(){for(let e=0;e<this.mealItemsRecord[this.selectedMeal].length;e++)this.mealItems[this.selectedMeal][e]={value:this.mealItemsRecord[this.selectedMeal][e],active:!0,disabled:!1,check:!1}},settingFirst(){this.originalMealItems={...this.mealItems};const e=Object.values(this.mealItems).every((e=>0===e.length||e.every((e=>!e.check))));e&&(this.showWriteRecord=!1,this.isSaveVisible=!0,this.showCount=0)},getMealArchive(){const e=this.user_id,t=String(this.lookTimes),s="mor"===this.selectedMeal?"아침":"lun"===this.selectedMeal?"점심":"저녁";(0,j.Z)({method:"get",url:"https://port-0-food-bag-jvpb2alnlhtxnz.sel5.cloudtype.app/calenderMeal/getMealNames?",params:{userIdx:e,date:t,occasion:s}}).then((e=>{const t=e.data;switch(t.rst_cd){case"-1":console.log(t);break;case"-2":console.log(t),this.showWriteRecord=!1,this.showCount=0;break;case"200":console.log(t),console.log(t.mealNames),this.showCount=2,this.showWriteRecord=!0,this.isSaveVisible=!1,this.mealItems[this.selectedMeal]=t.mealNames.map((e=>({value:e,active:!0,disabled:!0,check:!0})));break;default:console.log(t),this.showCount=0;break}})).catch((e=>{console.log("에러!!!"),console.log(e)}))}},watch:{Reco(e){const t=e;if(0!=t){const e=this.user_id,t=String(this.lookTimes),s="mor"===this.selectedMeal?"아침":"lun"===this.selectedMeal?"점심":"저녁";(0,j.Z)({method:"delete",url:"https://port-0-food-bag-jvpb2alnlhtxnz.sel5.cloudtype.app/calenderMeal/removeMealRecords?",params:{userIdx:e,date:t,occasion:s}}).then((e=>{const t=e.data;switch(t.rst_cd){case"200":console.log(t),this.showCount=0,this.showWriteRecord=!1,this.isSaveVisible=!1,this.openModal=!1,this.Reco=!1;break;default:console.log(t);break}})).catch((e=>{console.log("에러!!!"),console.log(e)}))}},selectedMeal(e,t){e!=t&&(this.callRecordList(),this.getMealArchive())}},created(){this.setCurrentDate(),this.selectedMeal="mor",this.settingFirst(),this.callRecordList(),this.setRecordListMealItems(),this.getMealArchive()}},Y=s(3744);const H=(0,Y.Z)(O,[["render",P],["__scopeId","data-v-9b7ac32c"]]);var K=H},8062:function(e,t,s){s.d(t,{Z:function(){return p}});var l=s(6252);const o=e=>((0,l.dD)("data-v-b80fe17c"),e=e(),(0,l.Cn)(),e),c={class:"popup-view"},a=o((()=>(0,l._)("div",{class:"hat"},null,-1))),i={id:"Q_PopUp"},n=o((()=>(0,l._)("p",null,"기록을 삭제하시겠습니까?",-1))),d={id:"btn_zip"};function r(e,t,s,o,r,h){return(0,l.wg)(),(0,l.iD)("div",c,[a,(0,l._)("div",i,[n,(0,l._)("div",d,[(0,l._)("button",{onClick:t[0]||(t[0]=e=>h.closePopup()),id:"close"},"취소"),(0,l._)("button",{onClick:t[1]||(t[1]=e=>h.deReco()),id:"delRe"},"확인")])])])}var h={name:"RecordPopUp",methods:{closePopup(){this.$emit("closePopup",!1)},deReco(){this.$parent.Reco=!0}}},u=s(3744);const m=(0,u.Z)(h,[["render",r],["__scopeId","data-v-b80fe17c"]]);var p=m},5506:function(e,t,s){s.d(t,{Z:function(){return I}});var l=s(6252),o=s(3464),c=s.p+"img/ManageOffBTN.44e364f2.svg",a=s.p+"img/UserOffBTN.bdd8aae0.svg",i=s.p+"img/ExitOffBTN.58e4b041.svg";const n=e=>((0,l.dD)("data-v-2f106f78"),e=e(),(0,l.Cn)(),e),d={class:"nav"},r=n((()=>(0,l._)("div",null,"식단추천",-1))),h=n((()=>(0,l._)("img",{src:o,id:"icon1"},null,-1))),u=n((()=>(0,l._)("div",null,"식단관리",-1))),m=n((()=>(0,l._)("img",{src:c,id:"icon2"},null,-1))),p=n((()=>(0,l._)("div",null,"회원정보",-1))),g=n((()=>(0,l._)("img",{src:a,id:"icon3"},null,-1))),v=n((()=>(0,l._)("div",null,"로그아웃",-1))),y=n((()=>(0,l._)("img",{src:i,id:"icon4"},null,-1)));function f(e,t,s,o,c,a){const i=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(i,{to:"/dietlist",id:"s_effect1"},{default:(0,l.w5)((()=>[r,h])),_:1}),(0,l.Wm)(i,{to:"/manage2",id:"s_effect2"},{default:(0,l.w5)((()=>[u,m])),_:1}),(0,l.Wm)(i,{to:"/UserInfo",id:"s_effect3"},{default:(0,l.w5)((()=>[p,g])),_:1}),(0,l.Wm)(i,{to:"/",onClick:t[0]||(t[0]=e=>a.resetState()),id:"s_effect4"},{default:(0,l.w5)((()=>[v,y])),_:1})])}var k=s(5008),w={name:"FoodyNav",mounted(){this.changeIconOnScreens()},methods:{resetState(){const e=k.cd.call(this),t=k.Zl.call(this);this.$store.commit("resetState"),this.$router.replace({path:"/",name:"FoodyLogin"}),(0,k.kT)(e),(0,k.kT)(t)},changeIconOnScreens(){const e=this.$route.path,t=document.getElementById("s_effect1"),s=document.getElementById("s_effect2"),l=document.getElementById("s_effect3");"/dietlist"===e?(t.style.color="#fff",t.style.backgroundColor="#001335"):"/manage2"===e?(s.style.color="#fff",s.style.backgroundColor="#001335"):"/UserInfo"!==e&&"/quit"!==e&&"/change"!==e&&"/changeDis"!==e&&"/changeAle"!==e&&"/rule"!==e||(l.style.color="#fff",l.style.backgroundColor="#001335")}}},M=s(3744);const b=(0,M.Z)(w,[["render",f],["__scopeId","data-v-2f106f78"]]);var I=b},3464:function(e,t,s){e.exports=s.p+"img/ListOffBTN.f19ca086.svg"},8454:function(e,t,s){e.exports=s.p+"img/PenBTN.ef50f913.svg"},7128:function(e,t,s){e.exports=s.p+"img/leftBTN.a471ea42.svg"},1931:function(e,t,s){e.exports=s.p+"img/rightBTN.b5cc82e3.svg"},2919:function(e,t,s){e.exports=s.p+"img/saveBTN.a572f714.svg"}}]);
//# sourceMappingURL=126.188e79de.js.map