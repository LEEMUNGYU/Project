"use strict";(self["webpackChunkdrfoody"]=self["webpackChunkdrfoody"]||[]).push([[345],{811:function(e,t,s){s.r(t),s.d(t,{default:function(){return K}});var l=s(6252),o=s(3577),c=s(9963),a=s(7128),i=s(1931),d=s(8454),n=s(2919);const r=e=>((0,l.dD)("data-v-424a0e86"),e=e(),(0,l.Cn)(),e),m={class:"mainContents"},h=r((()=>(0,l._)("h3",null,"식단관리",-1))),u=r((()=>(0,l._)("hr",{id:"first_line"},null,-1))),p={class:"container"},v={class:"arrow"},g={class:"day"},y={class:"arrow"},f={class:"container"},k=["onClick"],_={class:"writeList"},I={key:0,class:"record"},M=r((()=>(0,l._)("div",{class:"noticeRecord"},"식사 기록이 없습니다",-1))),b=r((()=>(0,l._)("div",{class:"r-b"},"기록하기",-1))),R=r((()=>(0,l._)("img",{src:d,id:"penBTN",alt:"기록"},null,-1))),w=[R],S={key:1,class:"writeRecord"},C={class:"titleNbtn"},D=r((()=>(0,l._)("div",{class:"write_word"},"식사기록",-1))),T={class:"Icons"},q=r((()=>(0,l._)("div",{class:"saveNchange_BTN"},[(0,l._)("img",{src:n,id:"saveBTN",alt:"저장"}),(0,l._)("img",{src:d,id:"changeBTN",alt:"수정"})],-1))),A={class:"writeListItems"},E={class:"writeListEle"},N=["onUpdate:modelValue","placeholder","disabled"],x=["onClick"],B=["onClick"],L=["onClick"],$={class:"compNcan"},W={class:"main"},P=r((()=>(0,l._)("div",{class:"word"},"식단 추천",-1))),Z={class:"writeListItems"};function V(e,t,s,d,n,r){const R=(0,l.up)("foody-header"),V=(0,l.up)("RecordPopUp"),U=(0,l.up)("foody-nav");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(R),(0,l._)("div",m,[h,u,(0,l._)("div",p,[(0,l._)("div",v,[(0,l._)("img",{src:a,alt:"어제 날짜로",onClick:t[0]||(t[0]=e=>r.moveDay(-1))})]),(0,l._)("div",g,(0,o.zw)(n.currentDate),1),(0,l._)("div",y,[(0,l._)("img",{src:i,alt:"내일 날짜",onClick:t[1]||(t[1]=e=>r.moveDay(1))})])]),(0,l._)("div",f,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.meals,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,onClick:t=>r.selectMealTime(e.id),class:(0,o.C_)({mealTime:!0,selected:n.selectedMeal===e.id})},(0,o.zw)(e.name),11,k)))),128))]),(0,l._)("div",_,[n.showWriteRecord?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",I,[M,b,(0,l._)("div",{class:"write_BTN",onClick:t[2]||(t[2]=e=>r.writeRecord())},w)])),n.showWriteRecord?((0,l.wg)(),(0,l.iD)("div",S,[(0,l._)("div",C,[D,(0,l._)("div",T,[q,n.isSaveVisible?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"saveText",onClick:t[3]||(t[3]=e=>r.saveRecord())},"저장")):(0,l.kq)("",!0),(0,l._)("div",{class:"changeText",onClick:t[4]||(t[4]=e=>r.ChangeRecord())},"수정")])]),(0,l._)("div",A,[(0,l._)("div",E,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.selectedMealItems,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:"inputWrapper"},[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":e=>r.selectedMealItems[t].value=e,placeholder:r.getPlaceholderText(t),disabled:r.selectedMealItems[t].disabled},null,8,N),[[c.nr,r.selectedMealItems[t].value]]),(0,l._)("div",{class:"puls",onClick:e=>r.decisionList(t,!0)},"+",8,x),(0,l._)("div",{class:"eliminate",onClick:e=>r.removeLastItem(t,!0)},"x",8,B),(0,l._)("div",{class:"minus",onClick:e=>r.decisionList(t,!1)},"-",8,L)])))),128))]),(0,l._)("div",$,[(0,l._)("div",{class:"comp",onClick:t[5]||(t[5]=t=>r.addInput(e.index))},"추가 기록"),(0,l._)("div",{class:"can",onClick:t[6]||(t[6]=e=>r.recordCancel())},"기록 취소"),(0,l._)("div",{class:"del",onClick:t[7]||(t[7]=e=>r.DelRecord())},"기록 삭제")])])])):(0,l.kq)("",!0),1==this.openModal?((0,l.wg)(),(0,l.j4)(V,{key:2,onClosePopup:r.closeModalView,onDeReco:n.Reco},null,8,["onClosePopup","onDeReco"])):(0,l.kq)("",!0),(0,l._)("div",W,[P,(0,l._)("div",Z,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.selectedMealItemsRecord,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,id:"item",class:"item1"},(0,o.zw)(e),1)))),128))])])])]),(0,l.Wm)(U)],64)}var U=s(8062),F=s(3937),z=s(5506),O=s(5121),j={name:"DietManage",components:{FoodyHeader:F.Z,FoodyNav:z.Z,RecordPopUp:U.Z},data(){return{openModal:!1,Reco:!1,showWriteRecord:{mor:!1,lun:!1,din:!1},isSaveVisible:{mor:!1,lun:!1,din:!1},originalMealItems:{},currentDate:"",meals:[{id:"mor",name:"아침"},{id:"lun",name:"점심"},{id:"din",name:"저녁"}],selectedMeal:"mor",mealItems:{mor:[],lun:[],din:[]},mealItemsRecord:{mor:[],lun:[],din:[]},lookTimes:"",user_id:this.$store.state.userId}},mounted(){this.setCurrentDate()},computed:{selectedMealItems(){return this.mealItems[this.selectedMeal]},selectedMealItemsRecord(){return this.mealItemsRecord[this.selectedMeal]}},methods:{setCurrentDate(){const e=new Date,t=e.getMonth()+1,s=e.getDate(),l=e.getFullYear();this.currentDate=`${t}월 ${s}일`,this.lookTimes=`${l}-${String(t).padStart(2,"0")}-${String(s).padStart(2,"0")}`},moveDay(e){const t=new Date(this.lookTimes),s=new Date(t.setDate(t.getDate()+e)),l=s.getMonth()+1,o=s.getDate(),c=s.getFullYear();this.currentDate=`${l}월 ${o}일`,this.lookTimes=`${c}-${String(l).padStart(2,"0")}-${String(o).padStart(2,"0")}`,this.callRecordList()},writeRecord(){this.setRecordListMealItems(),this.showWriteRecord=!0},selectMealTime(e){this.selectedMeal=e,this.selectedItem=this.mealItems[e];const t=this.mealItems[e].every((e=>e.check));t?this.$nextTick((()=>{this.setSaveRecord()})):(this.showWriteRecord=!1,this.isSaveVisible=!1)},hasSavedRecord(e){return this.mealItems[e].every((e=>e.check))},selectItem(e){this.selectedItem=e},addInput(e){const t=e+1===this.selectedMealItems.length?e+1:this.selectedMealItems.length;this.selectedMealItems.splice(t,0,{value:"",active:!0,check:!1})},recordCancel(){this.setRecordListMealItems(),this.showWriteRecord=!1,this.isSaveVisible=!0},getPlaceholderText(e){return"Item "+(1+e)},decisionList(e,t){const s=document.querySelectorAll(".puls"),l=document.querySelectorAll(".eliminate"),o=document.querySelectorAll(".minus");e>=0&&e<this.selectedMealItems.length&&(t?(this.selectedMealItems[e]={value:this.selectedMealItems[e].value,disabled:!0},s[e].style.display="none",l[e].style.display="none",o[e].style.display="block"):(this.selectedMealItems[e]={value:this.selectedMealItems[e].value,disabled:!1},s[e].style.display="block",l[e].style.display="block",o[e].style.display="none"))},setSaveRecord(){const e=document.querySelectorAll(".puls"),t=document.querySelectorAll(".eliminate"),s=document.querySelectorAll(".minus"),l=document.querySelectorAll(".comp"),o=document.querySelectorAll(".can"),c=document.querySelectorAll(".del");this.selectedMealItems.length>0&&this.selectedMealItems.forEach(((l,o)=>{const c=e[o],a=t[o],i=s[o];c.style.display="none",a.style.display="none",i.style.display="none"})),l.forEach((e=>e.style.display="none")),o.forEach((e=>e.style.display="none")),c.forEach((e=>e.style.display="block"));const a=document.querySelectorAll("#changeBTN");a.forEach((e=>e.style.display="block"));const i=document.querySelectorAll("#saveBTN");i.forEach((e=>e.style.display="none"));const d=document.querySelectorAll(".changeText");d.forEach((e=>e.style.display="block"));const n=document.querySelectorAll(".saveText");n.forEach((e=>e.style.display="none"));const r=document.querySelectorAll(".record");r.forEach((e=>e.style.display="none")),this.showWriteRecord=!0,this.isSaveVisible=!1},setChangeRecord(){const e=document.querySelectorAll(".puls"),t=document.querySelectorAll(".eliminate"),s=document.querySelectorAll(".minus"),l=document.querySelectorAll(".comp"),o=document.querySelectorAll(".can"),c=document.querySelectorAll(".del");this.selectedMealItems.forEach(((l,o)=>{const c=s[o],a=t[o],i=e[o];c.style.display="none",a.style.display="block",i.style.display="block"})),l.forEach((e=>e.style.display="block")),o.forEach((e=>e.style.display="block")),c.forEach((e=>e.style.display="none"));const a=document.querySelectorAll("#changeBTN");a.forEach((e=>e.style.display="none"));const i=document.querySelectorAll("#saveBTN");i.forEach((e=>e.style.display="block"));const d=document.querySelectorAll(".changeText");d.forEach((e=>e.style.display="none"));const n=document.querySelectorAll(".saveText");n.forEach((e=>e.style.display="block"));const r=document.querySelectorAll(".record");r.forEach((e=>e.style.display="block")),this.showWriteRecord=this.hasSavedRecord(this.selectedMeal),this.isSaveVisible=this.hasSavedRecord(this.selectedMeal)},saveRecord(){const e=this.$store.state.userId,t=this.lookTimes,s="mor"===this.selectedMeal?"아침":"lun"===this.selectedMeal?"점심":"저녁",l=this.mealItems.mor.map((e=>e.value)),o=this.mealItems.lun.map((e=>e.value)),c=this.mealItems.din.map((e=>e.value)),a="mor"===this.selectedMeal?l:"lun"===this.selectedMeal?o:c,i=a.join(", ");(0,O.Z)({method:"post",url:"https://port-0-food-bag-jvpb2alnlhtxnz.sel5.cloudtype.app/calenderMeal/writeMealRecords?",params:{userIdx:e,date:t,occasion:s,foodRecord:i}}).then((e=>{const t=e.data;switch(t){case"200":console.log(e.data);break;case"-2":console.log(e.data);break;case"-3":console.log(e.data);break;default:console.log(e.data);break}})).catch((e=>{console.log("에러!!!"),console.log(e)})),this.setSaveRecord(),this.mealItems[this.selectedMeal].forEach((e=>{e.disabled=!0,e.check=!0}))},ChangeRecord(){this.setChangeRecord(),this.mealItems[this.selectedMeal].forEach((e=>{e.disabled=!1,e.check=!1}))},DelRecord(){this.openModal=!0},closeModalView(e){this.openModal=e},removeLastItem(e){e>=0&&e<this.selectedMealItems.length&&this.selectedMealItems.splice(e,1)},callRecordList(){const e=this.user_id,t=String(this.lookTimes),s="mor"===this.selectedMeal?"아침":"lun"===this.selectedMeal?"점심":"저녁";(0,O.Z)({method:"get",url:"https://port-0-food-bag-jvpb2alnlhtxnz.sel5.cloudtype.app/calenderRecommend/searchRmdMeal?",params:{userIdx:e,date:t,occasion:s}}).then((e=>{const t=e.data;switch(t.rst_cd){case"-1":console.log(t);break;case"200":console.log(t),this.mealItemsRecord[this.selectedMeal]=t.foodList.map((e=>e.name));break;default:console.log(t);break}})).catch((e=>{console.log("에러!!!"),console.log(e)}))},setRecordListMealItems(){for(let e=0;e<this.mealItemsRecord[this.selectedMeal].length;e++)this.mealItems[this.selectedMeal][e]={value:this.mealItemsRecord[this.selectedMeal][e],active:!0,disabled:!1,check:!1}},settingFirst(){this.originalMealItems={...this.mealItems};const e=Object.values(this.mealItems).every((e=>0===e.length||e.every((e=>!e.check))));e&&(this.showWriteRecord=!1)},getMealArchive(){const e=this.user_id,t=String(this.lookTimes),s="mor"===this.selectedMeal?"아침":"lun"===this.selectedMeal?"점심":"저녁";(0,O.Z)({method:"get",url:"https://port-0-food-bag-jvpb2alnlhtxnz.sel5.cloudtype.app/calenderMeal/getMealNames?",params:{userIdx:e,date:t,occasion:s}}).then((e=>{const t=e.data;switch(t.rst_cd){case"-1":console.log(t);break;case"-2":console.log(t);break;case"200":console.log(t),console.log(t.mealNames),this.mealItems[this.selectedMeal]=t.mealNames.map((e=>({value:e,active:!0,disabled:!0,check:!0})));break;default:console.log(t);break}})).catch((e=>{console.log("에러!!!"),console.log(e)}))}},watch:{Reco(e){const t=e;0!=t&&(this.mealItems[this.selectedMeal]=this.mealItemsRecord[this.selectedMeal].map((e=>({...e}))),this.showWriteRecord=!1,this.isSaveVisible=!0,this.openModal=!1,this.Reco=!1)},selectedMeal(e,t){e!=t&&(this.callRecordList(),this.getMealArchive())}},created(){this.setCurrentDate(),this.selectedMeal="mor",this.settingFirst(),this.callRecordList(),this.setRecordListMealItems(),this.getMealArchive()}},Y=s(3744);const H=(0,Y.Z)(j,[["render",V],["__scopeId","data-v-424a0e86"]]);var K=H},8062:function(e,t,s){s.d(t,{Z:function(){return p}});var l=s(6252);const o=e=>((0,l.dD)("data-v-b80fe17c"),e=e(),(0,l.Cn)(),e),c={class:"popup-view"},a=o((()=>(0,l._)("div",{class:"hat"},null,-1))),i={id:"Q_PopUp"},d=o((()=>(0,l._)("p",null,"기록을 삭제하시겠습니까?",-1))),n={id:"btn_zip"};function r(e,t,s,o,r,m){return(0,l.wg)(),(0,l.iD)("div",c,[a,(0,l._)("div",i,[d,(0,l._)("div",n,[(0,l._)("button",{onClick:t[0]||(t[0]=e=>m.closePopup()),id:"close"},"취소"),(0,l._)("button",{onClick:t[1]||(t[1]=e=>m.deReco()),id:"delRe"},"확인")])])])}var m={name:"RecordPopUp",methods:{closePopup(){this.$emit("closePopup",!1)},deReco(){this.$parent.Reco=!0}}},h=s(3744);const u=(0,h.Z)(m,[["render",r],["__scopeId","data-v-b80fe17c"]]);var p=u},5506:function(e,t,s){s.d(t,{Z:function(){return b}});var l=s(6252),o=s(3464),c=s.p+"img/ManageOffBTN.44e364f2.svg",a=s.p+"img/UserOffBTN.bdd8aae0.svg",i=s.p+"img/ExitOffBTN.58e4b041.svg";const d=e=>((0,l.dD)("data-v-2f106f78"),e=e(),(0,l.Cn)(),e),n={class:"nav"},r=d((()=>(0,l._)("div",null,"식단추천",-1))),m=d((()=>(0,l._)("img",{src:o,id:"icon1"},null,-1))),h=d((()=>(0,l._)("div",null,"식단관리",-1))),u=d((()=>(0,l._)("img",{src:c,id:"icon2"},null,-1))),p=d((()=>(0,l._)("div",null,"회원정보",-1))),v=d((()=>(0,l._)("img",{src:a,id:"icon3"},null,-1))),g=d((()=>(0,l._)("div",null,"로그아웃",-1))),y=d((()=>(0,l._)("img",{src:i,id:"icon4"},null,-1)));function f(e,t,s,o,c,a){const i=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(i,{to:"/dietlist",id:"s_effect1"},{default:(0,l.w5)((()=>[r,m])),_:1}),(0,l.Wm)(i,{to:"/manage2",id:"s_effect2"},{default:(0,l.w5)((()=>[h,u])),_:1}),(0,l.Wm)(i,{to:"/UserInfo",id:"s_effect3"},{default:(0,l.w5)((()=>[p,v])),_:1}),(0,l.Wm)(i,{to:"/",onClick:t[0]||(t[0]=e=>a.resetState()),id:"s_effect4"},{default:(0,l.w5)((()=>[g,y])),_:1})])}var k=s(5008),_={name:"FoodyNav",mounted(){this.changeIconOnScreens()},methods:{resetState(){const e=k.cd.call(this),t=k.Zl.call(this);this.$store.commit("resetState"),this.$router.replace({path:"/",name:"FoodyLogin"}),(0,k.kT)(e),(0,k.kT)(t)},changeIconOnScreens(){const e=this.$route.path,t=document.getElementById("s_effect1"),s=document.getElementById("s_effect2"),l=document.getElementById("s_effect3");"/dietlist"===e?(t.style.color="#fff",t.style.backgroundColor="#001335"):"/manage2"===e?(s.style.color="#fff",s.style.backgroundColor="#001335"):"/UserInfo"!==e&&"/quit"!==e&&"/change"!==e&&"/changeDis"!==e&&"/changeAle"!==e&&"/rule"!==e||(l.style.color="#fff",l.style.backgroundColor="#001335")}}},I=s(3744);const M=(0,I.Z)(_,[["render",f],["__scopeId","data-v-2f106f78"]]);var b=M},3464:function(e,t,s){e.exports=s.p+"img/ListOffBTN.f19ca086.svg"},8454:function(e,t,s){e.exports=s.p+"img/PenBTN.ef50f913.svg"},7128:function(e,t,s){e.exports=s.p+"img/leftBTN.a471ea42.svg"},1931:function(e,t,s){e.exports=s.p+"img/rightBTN.b5cc82e3.svg"},2919:function(e,t,s){e.exports=s.p+"img/saveBTN.a572f714.svg"}}]);
//# sourceMappingURL=345.1b4d35b1.js.map